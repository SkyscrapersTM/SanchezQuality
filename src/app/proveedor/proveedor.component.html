<div class="d-flex">
  <app-dashboard></app-dashboard>
  <div class="w-100">
    <app-navbar></app-navbar>
    <div id="content">
      <section class="mb-1">
        <div class="container">
          <div class="row">
            <div class="col-lg-9">
              <h1 class="fw-bold">Mantemiento de Proveedor</h1>
              <p class="lead text-muted">Registra, actualiza o elimina el proveedor.</p>
            </div>
          </div>
        </div>
      </section>
      <section>
        <div class="container">
          <form>
            <div class="row mb-2">
              <div class="col-3">
                <div class="form-group">
                  <label for="paisElegida"><b>País:</b></label>
                  <select class="form-select" name="paisElegida" id="paisElegida" [(ngModel)]="paisElegida"
                    (change)="onChangePais()">
                    <option [ngValue]="null" selected>Elige un pais</option>
                    <option [ngValue]="pais" *ngFor="let pais of paises">{{pais.nombre}}</option>
                  </select>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label for="marcaElegida"><b>Marca:</b></label>
                  <select class="form-select" name="marcaElegida" id="marcaElegida" [(ngModel)]="marcaElegida"
                    (change)="onChangeMarca()">
                    <option [ngValue]="null" selected>Elige una marca</option>
                    <option [ngValue]="marca" *ngFor="let marca of marcas">{{marca.nombre}}</option>
                  </select>
                </div>
              </div>
              <div class="col-4">
                <div class="form-group">
                  <label for="razonSocial"><b>Razon Social:</b></label>
                  <div class="input-group">
                    <button class="btn btn-outline-danger" (click)="clearRazonSocial()"
                      [disabled]="!busquedaDTO.razonSocial">Vaciar</button>
                    <input class="form-control" type="text" name="razonSocial" id="razonSocial"
                      [(ngModel)]="busquedaDTO.razonSocial" placeholder="Ingrese una Razón Social.">
                    <button class="btn btn-outline-success" (click)="listaProveedores()">Filtrar</button>
                  </div>
                </div>
              </div>
              <div class="col-2">
                <label for="reset"><b>Restablecer:</b></label>
                <button class="btn btn-outline-danger form-control" (click)="clear()">Borrar Filtros</button>
              </div>
              <div class="col-3">
                <label for="">Proveedor:</label>
                <a class="btn btn-outline-success form-control" routerLink="/proveedor/nuevo">Agregar</a>
              </div>
            </div>
          </form>
        </div>
        <div class="container">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Pais</th>
                <th scope="col">Marca</th>
                <th class="text-center" scope="col">DNI</th>
                <th scope="col">Nombres</th>
                <th scope="col">Apellidos</th>
                <th scope="col">Razon Social</th>
                <th scope="col">Direccion</th>
                <th scope="col">Celular</th>
                <th scope="col">Email</th>
                <th class="text-center" scope="col">Acciones <i class="bi bi-chevron-expand" (click)="sort()"></i></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let proveedor of proveedores">
                <td class="pt-3">{{proveedor.pais.nombre}}</td>
                <td class="pt-3">{{proveedor.marca.nombre}}</td>
                <td class="text-center pt-3">{{proveedor.dni}}</td>
                <td class="pt-3">{{proveedor.nombres}}</td>
                <td class="pt-3">{{proveedor.apellidos}}</td>
                <td class="pt-3">{{proveedor.razonSocial}}</td>
                <td class="pt-3">{{proveedor.direccion}}</td>
                <td class="pt-3">{{proveedor.celular}}</td>
                <td class="pt-3">{{proveedor.email}}</td>
                <td class="text-center">
                  <div class="btn-group" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-outline-primary" routerLink="/proveedor/editar/{{proveedor.id}}">Editar</button>
                    <button type="button" class="btn btn-outline-danger" (click)="borrar(proveedor.id)">Eliminar</button>
                    <button type="button" class="btn btn-outline-primary"  routerLink="/proveedor/detail/{{proveedor.id}}">Detalle</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</div>